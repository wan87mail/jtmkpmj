---
/**
 * aplikasi.astro - Applications Page
 * Displays apps and tools used by lecturers and students
 */

import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

interface App {
  name: string;
  description: string;
  icon: string;
  url: string;
  category: 'lecturer' | 'student' | 'both';
}

const apps: App[] = [
  // Apps for both
  {
    name: 'Google Classroom',
    description: 'Platform pembelajaran dalam talian untuk pengurusan kelas dan tugasan',
    icon: 'classroom',
    url: 'https://classroom.google.com',
    category: 'both'
  },
  {
    name: 'Microsoft Teams',
    description: 'Platform kolaborasi untuk komunikasi dan mesyuarat dalam talian',
    icon: 'teams',
    url: 'https://teams.microsoft.com',
    category: 'both'
  },
  {
    name: 'Google Meet',
    description: 'Aplikasi video conferencing untuk kelas dan mesyuarat maya',
    icon: 'meet',
    url: 'https://meet.google.com',
    category: 'both'
  },
  {
    name: 'CIDOS',
    description: 'Sistem pengurusan pembelajaran politeknik Malaysia',
    icon: 'cidos',
    url: 'https://pmjlms.cidos.edu.my/',
    category: 'both'
  },
  // Lecturer apps
  {
    name: 'SPMP',
    description: 'Sistem Pengurusan Maklumat Politeknik untuk pensyarah',
    icon: 'spmp',
    url: 'https://spmp.pmj.edu.my',
    category: 'both'
  },
  {
    name: 'PEMILIHAN TREK',
    description: 'Sistem Pemilihan Trek Semester 1',
    icon: 'My-Trek',
    url: '#',
    category: 'both'
  },
  // Student apps
  {
    name: 'Portal Pelajar PMJ',
    description: 'Portal rasmi pelajar untuk pendaftaran dan maklumat akademik',
    icon: 'portal',
    url: '#',
    category: 'student'
  },
  {
    name: 'e-PPT',
    description: 'Sistem Penilaian Pengalaman Pembelajaran & Latihan Industri',
    icon: 'eppt',
    url: '#',
    category: 'student'
  }
];

const icons: Record<string, string> = {
  classroom: '<rect x="3" y="4" width="18" height="16" rx="2"/> <path d="M12 8a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/> <path d="M8 14c0-1.1.9-2 2-2h4c1.1 0 2 .9 2 2"/>',
  teams: '<rect x="2" y="2" width="20" height="20" rx="2"/> <circle cx="9" cy="9" r="2"/> <circle cx="15" cy="9" r="2"/> <path d="M6 16c0-2 2-3 3-3h6c1 0 3 1 3 3"/>',
  meet: '<path d="M15 10l5-3v10l-5-3z"/> <rect x="2" y="6" width="13" height="12" rx="2"/>',
  cidos: '<circle cx="12" cy="12" r="10"/> <path d="M8 12l2 2 4-4"/>',
  spmp: '<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/> <path d="M14 2v6h6"/> <path d="M12 18v-6"/> <path d="M9 15h6"/>',
  epbl: '<circle cx="12" cy="12" r="10"/> <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/> <path d="M12 17h.01"/>',
  portal: '<rect x="3" y="3" width="18" height="18" rx="2"/> <path d="M9 9h6"/> <path d="M9 13h6"/> <path d="M9 17h4"/>',
  eppt: '<path d="M22 10v6M2 10l10-5 10 5-10 5z"/> <path d="M6 12v5c3 3 9 3 12 0v-5"/>'
};

const pageTitle = 'Aplikasi - JTMK';
const pageDescription = 'Senarai aplikasi dan platform digital yang digunakan oleh pensyarah dan pelajar JTMK';
---

<Layout title={pageTitle} description={pageDescription}>
  <Header />

  <main class="apps-page">
    <!-- Page Hero -->
    <section class="page-hero">
      <div class="container">
        <nav class="breadcrumb">
          <a href="/">Utama</a>
          <span class="separator">/</span>
          <span class="current">Aplikasi</span>
        </nav>
        <h1 class="page-title">Aplikasi & Perisian</h1>
        <p class="page-description">
          Senarai aplikasi dan platform digital yang digunakan oleh pensyarah dan pelajar JTMK
        </p>
      </div>
    </section>

    <!-- Apps Section -->
    <section class="apps-section">
      <div class="container">
        <!-- Tabs -->
        <div class="tabs-container">
          <div class="tabs">
            <button class="tab-btn active" data-tab="all">Semua</button>
            <button class="tab-btn" data-tab="lecturer">Pensyarah</button>
            <button class="tab-btn" data-tab="student">Pelajar</button>
          </div>
        </div>

        <!-- Apps Grid -->
        <div class="apps-grid">
          {apps.map((app) => (
            <a href={app.url} class="app-card" data-category={app.category} target="_blank" rel="noopener noreferrer">
              <div class="app-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" set:html={icons[app.icon]} />
              </div>
              <div class="app-content">
                <h3 class="app-name">{app.name}</h3>
                <p class="app-description">{app.description}</p>
                <span class="app-badge" data-type={app.category}>
                  {app.category === 'both' ? 'Semua' : app.category === 'lecturer' ? 'Pensyarah' : 'Pelajar'}
                </span>
              </div>
              <div class="app-arrow">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M5 12h14M12 5l7 7-7 7"/>
                </svg>
              </div>
            </a>
          ))}
        </div>
      </div>
    </section>
  </main>

  <Footer />
</Layout>

<style>
  .apps-page {
    padding-top: var(--header-height);
  }

  /* Page Hero */
  .page-hero {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    padding: var(--space-16) 0;
    color: var(--white);
  }

  .breadcrumb {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    margin-bottom: var(--space-4);
    font-size: var(--text-sm);
  }

  .breadcrumb a {
    color: rgba(255, 255, 255, 0.8);
    text-decoration: none;
    transition: color var(--transition-fast);
  }

  .breadcrumb a:hover {
    color: var(--white);
  }

  .breadcrumb .separator {
    color: rgba(255, 255, 255, 0.5);
  }

  .breadcrumb .current {
    color: var(--white);
  }

  .page-title {
    font-size: var(--text-4xl);
    font-weight: 700;
    margin-bottom: var(--space-4);
  }

  .page-description {
    font-size: var(--text-lg);
    color: rgba(255, 255, 255, 0.9);
    max-width: 600px;
  }

  /* Apps Section */
  .apps-section {
    padding: var(--space-16) 0;
    background: var(--grey-light);
    min-height: 60vh;
  }

  /* Tabs */
  .tabs-container {
    display: flex;
    justify-content: center;
    margin-bottom: var(--space-10);
  }

  .tabs {
    display: inline-flex;
    background: var(--white);
    padding: var(--space-1);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow);
  }

  .tab-btn {
    padding: var(--space-3) var(--space-8);
    font-size: var(--text-base);
    font-weight: 500;
    color: var(--grey);
    background: transparent;
    border: none;
    border-radius: var(--radius);
    cursor: pointer;
    transition: all var(--transition-fast);
  }

  .tab-btn:hover {
    color: var(--dark);
  }

  .tab-btn.active {
    background: var(--primary);
    color: var(--white);
    box-shadow: var(--shadow-sm);
  }

  /* Apps Grid */
  .apps-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    gap: var(--space-6);
  }

  /* App Card */
  .app-card {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    padding: var(--space-6);
    background: var(--white);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow);
    text-decoration: none;
    transition: all var(--transition);
    border: 1px solid transparent;
  }

  .app-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-lg);
    border-color: var(--primary);
  }

  .app-card.hidden {
    display: none;
  }

  .app-icon {
    flex-shrink: 0;
    width: 64px;
    height: 64px;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    border-radius: var(--radius-lg);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .app-icon svg {
    width: 32px;
    height: 32px;
    color: var(--white);
  }

  .app-content {
    flex: 1;
    min-width: 0;
  }

  .app-name {
    font-size: var(--text-lg);
    font-weight: 600;
    color: var(--dark);
    margin-bottom: var(--space-2);
  }

  .app-description {
    font-size: var(--text-sm);
    color: var(--grey);
    line-height: 1.6;
    margin-bottom: var(--space-3);
  }

  .app-badge {
    display: inline-block;
    padding: var(--space-1) var(--space-3);
    font-size: var(--text-xs);
    font-weight: 500;
    border-radius: var(--radius-sm);
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .app-badge[data-type="both"] {
    background: rgba(16, 185, 129, 0.1);
    color: #059669;
  }

  .app-badge[data-type="lecturer"] {
    background: rgba(139, 92, 246, 0.1);
    color: #7c3aed;
  }

  .app-badge[data-type="student"] {
    background: rgba(59, 130, 246, 0.1);
    color: #2563eb;
  }

  .app-arrow {
    flex-shrink: 0;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transform: translateX(-10px);
    transition: all var(--transition-fast);
  }

  .app-arrow svg {
    width: 24px;
    height: 24px;
    color: var(--primary);
  }

  .app-card:hover .app-arrow {
    opacity: 1;
    transform: translateX(0);
  }

  /* Responsive */
  @media (max-width: 768px) {
    .page-hero {
      padding: var(--space-12) 0;
    }

    .page-title {
      font-size: var(--text-3xl);
    }

    .apps-section {
      padding: var(--space-12) 0;
    }

    .apps-grid {
      grid-template-columns: 1fr;
    }

    .tabs {
      width: 100%;
      justify-content: center;
    }

    .tab-btn {
      flex: 1;
      padding: var(--space-2) var(--space-3);
      font-size: var(--text-sm);
    }

    .app-card {
      padding: var(--space-4);
    }

    .app-icon {
      width: 52px;
      height: 52px;
    }

    .app-icon svg {
      width: 26px;
      height: 26px;
    }

    .app-arrow {
      display: none;
    }
  }
</style>

<script>
  // Tab filtering functionality
  const tabButtons = document.querySelectorAll('.tab-btn');
  const appCards = document.querySelectorAll('.app-card');

  tabButtons.forEach(button => {
    button.addEventListener('click', () => {
      // Update active tab
      tabButtons.forEach(btn => btn.classList.remove('active'));
      button.classList.add('active');

      const filter = button.getAttribute('data-tab');

      // Filter cards
      appCards.forEach(card => {
        const category = card.getAttribute('data-category');

        if (filter === 'all') {
          card.classList.remove('hidden');
        } else if (filter === 'lecturer') {
          if (category === 'lecturer' || category === 'both') {
            card.classList.remove('hidden');
          } else {
            card.classList.add('hidden');
          }
        } else if (filter === 'student') {
          if (category === 'student' || category === 'both') {
            card.classList.remove('hidden');
          } else {
            card.classList.add('hidden');
          }
        }
      });
    });
  });
</script>